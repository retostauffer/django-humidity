{% extends "layout.html" %}
{% load static %}

{% block css %}

{% endblock %}

{% block js %}
$(document).ready(function() {

    var temperature = JSON.parse(document.getElementById('json-temperature').textContent);
    var humidity    = JSON.parse(document.getElementById('json-humidity').textContent);

    // Create final data object 

    var layout_temperature = {
      title: 'Temperature',
      xaxis: {
        autorange: true,
        rangeselector: {buttons: [
            {
              count: 1,
              label: '1m',
              step: 'month',
              stepmode: 'backward'
            },
            {
              count: 6,
              label: '6m',
              step: 'month',
              stepmode: 'backward'
            },
            {step: 'all'}
          ]},
        type: 'date'
      },
      yaxis: {
        autorange: true,
        //range: [15, 35],
        type: 'linear'
      }
    };

    var layout_humidity = {
      title: 'Relative Humidity',
      xaxis: {
        autorange: true,
        type: 'date'
      },
      yaxis: {
        autorange: true,
        type: 'linear'
      }
    };
    
    console.log(temperature)
    Plotly.newPlot('plottemperature', temperature, layout_temperature);
    Plotly.newPlot('plothumidity',    humidity,    layout_humidity);

});
{% endblock %}

{% block content %}

<!-- plotly.js plot -->
<script src="{% static "node_modules/plotly.js/dist/plotly-basic.min.js" %}"></script>
<script src="{% static "node_modules/jquery-dateformat/dist/jquery-dateformat.min.js" %}"></script>

{{ temperature | json_script:"json-temperature" }}
{{ humidity | json_script:"json-humidity" }}

<div id="plottemperature" style="width: 100%; height: 600px;"></div>
<div id="plothumidity" style="width: 100%; height: 600px;"></div>

{% endblock  %}
